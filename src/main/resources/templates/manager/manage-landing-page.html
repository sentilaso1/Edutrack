<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Landing Page Manager - Youdemi</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        /* Custom animations and enhancements */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }

        .animate-fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        .animate-slide-in {
            animation: slideIn 0.3s ease-out;
        }

        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .glass-effect {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .hover-lift:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #10b981;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.2); }
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .mobile-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                z-index: 40;
            }

            .mobile-overlay.active {
                display: block;
            }
        }
    </style>
</head>

<body class="bg-gray-100 flex min-h-screen">
<!-- Mobile Menu Overlay -->
<div class="mobile-overlay" id="mobileOverlay" onclick="toggleMobileMenu()"></div>

<!-- Sidebar -->
<th:block th:insert="~{fragments/manager-sidebar :: manager-sidebar}"></th:block>

<!-- Main Content -->
<div class="ml-64 flex-1 p-6 animate-fade-in">
    <!-- Mobile Menu Button -->
    <button class="lg:hidden mb-4 p-2 bg-gray-800 text-white rounded-lg" onclick="toggleMobileMenu()">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
    </button>

    <!-- Header -->
    <div class="mb-8">
        <h1 class="text-3xl font-bold text-gray-800 mb-2">üé® Landing Page Manager</h1>
        <p class="text-gray-600">Customize your landing page content with ease</p>
    </div>

    <!-- Messages -->
    <div th:if="${successMessage}" class="mb-6 p-4 bg-green-50 border border-green-200 rounded-lg text-green-800 animate-fade-in">
        <div class="flex items-center gap-2">
            <span class="text-green-500">‚úÖ</span>
            <span th:text="${successMessage}"></span>
        </div>
    </div>

    <div th:if="${errorMessage}" class="mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 animate-fade-in">
        <div class="flex items-center gap-2">
            <span class="text-red-500">‚ùå</span>
            <span th:text="${errorMessage}"></span>
        </div>
    </div>

    <div th:if="${resetSuccess}" class="mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg text-blue-800 animate-fade-in">
        <div class="flex items-center gap-2">
            <span class="text-blue-500">üîÑ</span>
            <span>Reset to current configuration!</span>
        </div>
    </div>

    <!-- Control Panel -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6 hover-lift transition-all duration-200">
        <h2 class="text-lg font-semibold text-gray-800 mb-4">Settings</h2>

        <!-- Personalization Toggle -->
        <div class="flex items-center justify-between mb-4">
            <div class="flex items-center gap-3">
                <input type="checkbox"
                       th:checked="${isPersonalized}"
                       onchange="document.getElementById('togglePersonalization').submit()"
                       class="w-4 h-4 text-blue-600 rounded focus:ring-blue-500">
                <label class="text-gray-700 font-medium">Personalize per Role</label>
            </div>
            <form id="togglePersonalization"
                  th:action="@{/manager/landing-page/toggle-personalization}"
                  method="post" style="display: none;">
                <input type="hidden" name="personalize" th:value="${isPersonalized != null and !isPersonalized}"/>
                <input type="hidden" name="activeTab" th:value="${activeTab}"/>
            </form>
        </div>

        <!-- Role Selector -->
        <div th:if="${isPersonalized}" class="animate-fade-in">
            <form method="get" th:action="@{/manager/landing-page}">
                <div class="flex items-center gap-4">
                    <label class="text-gray-700 font-medium">Switch Role:</label>
                    <select name="role"
                            class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            onchange="this.form.submit()">
                        <option value="GUEST" th:selected="${role == 'GUEST'}">Guest</option>
                        <option value="MENTEE_NEW" th:selected="${role == 'MENTEE_NEW'}">New User</option>
                        <option value="MENTEE_EXPERIENCED" th:selected="${role == 'MENTEE_EXPERIENCED'}">Experienced User</option>
                    </select>
                    <input type="hidden" name="activeTab" th:value="${activeTab}"/>
                </div>
            </form>
        </div>
    </div>

    <!-- Main Form -->
    <form th:action="@{/manager/landing-page/save}" th:object="${landingConfig}" method="post" enctype="multipart/form-data">
        <input type="hidden" name="role" th:value="${role}"/>
        <input type="hidden" name="activeTab" th:value="${activeTab}"/>

        <!-- Tabs -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
            <div class="border-b border-gray-200 overflow-x-auto">
                <nav class="flex space-x-0 min-w-max">
                    <button type="button" onclick="switchTab('hero')"
                            class="tab px-6 py-4 text-sm font-medium transition-colors duration-200 border-b-2 border-transparent hover:text-blue-600 hover:border-blue-300"
                            th:classappend="${activeTab == 'hero'} ? 'text-blue-600 border-blue-500 bg-blue-50' : 'text-gray-500'">
                        üéØ Hero Section
                    </button>
                    <button type="button" onclick="switchTab('categories')"
                            class="tab px-6 py-4 text-sm font-medium transition-colors duration-200 border-b-2 border-transparent hover:text-blue-600 hover:border-blue-300"
                            th:classappend="${activeTab == 'categories'} ? 'text-blue-600 border-blue-500 bg-blue-50' : 'text-gray-500'">
                        üìö Categories
                    </button>
                    <button type="button" onclick="switchTab('about')"
                            class="tab px-6 py-4 text-sm font-medium transition-colors duration-200 border-b-2 border-transparent hover:text-blue-600 hover:border-blue-300"
                            th:classappend="${activeTab == 'about'} ? 'text-blue-600 border-blue-500 bg-blue-50' : 'text-gray-500'">
                        ‚ÑπÔ∏è About Section
                    </button>
                    <button type="button" onclick="switchTab('courses')"
                            class="tab px-6 py-4 text-sm font-medium transition-colors duration-200 border-b-2 border-transparent hover:text-blue-600 hover:border-blue-300"
                            th:classappend="${activeTab == 'courses'} ? 'text-blue-600 border-blue-500 bg-blue-50' : 'text-gray-500'">
                        üìñ Course Sections
                    </button>
                    <button type="button" onclick="switchTab('mentor')"
                            class="tab px-6 py-4 text-sm font-medium transition-colors duration-200 border-b-2 border-transparent hover:text-blue-600 hover:border-blue-300"
                            th:classappend="${activeTab == 'mentor'} ? 'text-blue-600 border-blue-500 bg-blue-50' : 'text-gray-500'">
                        üë§ Mentor Section
                    </button>
                    <button type="button" onclick="switchTab('footer')"
                            class="tab px-6 py-4 text-sm font-medium transition-colors duration-200 border-b-2 border-transparent hover:text-blue-600 hover:border-blue-300"
                            th:classappend="${activeTab == 'footer'} ? 'text-blue-600 border-blue-500 bg-blue-50' : 'text-gray-500'">
                        ü¶û Footer
                    </button>
                </nav>
            </div>

            <!-- Tab Content -->
            <div class="p-6">
                <!-- Hero Section -->
                <div class="tab-content animate-fade-in" th:classappend="${activeTab == 'hero'} ? 'block' : 'hidden'" id="hero-content">
                    <div class="space-y-6">
                        <div th:if="${role == 'MENTEE_EXPERIENCED'}" class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" th:field="*{useScheduleReminder}" class="w-4 h-4 text-blue-600 rounded focus:ring-blue-500"/>
                                <span class="text-gray-700 font-medium">Use schedule-based hero message?</span>
                            </label>
                            <p class="text-sm text-gray-600 mt-2">
                                If enabled, headline/subheadline/CTA will be filled automatically based on user's session progress.
                            </p>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Main Headline</label>
                                <input type="text" th:field="*{heroHeadline}"
                                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"/>
                                <p class="text-red-600 text-sm mt-1" th:if="${#fields.hasErrors('heroHeadline')}" th:errors="*{heroHeadline}"></p>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Sub Headline</label>
                                <input type="text" th:field="*{heroSubHeadline}"
                                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"/>
                                <p class="text-red-600 text-sm mt-1" th:if="${#fields.hasErrors('heroSubHeadline')}" th:errors="*{heroSubHeadline}"></p>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">CTA Button Text</label>
                                <input type="text" th:field="*{heroCTA}"
                                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"/>
                                <p class="text-red-600 text-sm mt-1" th:if="${#fields.hasErrors('heroCTA')}" th:errors="*{heroCTA}"></p>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">CTA Button Link</label>
                                <select th:field="*{heroCTALink}"
                                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">-- Select a route --</option>
                                    <option th:each="ep : ${availableEndpoints}"
                                            th:value="${ep}"
                                            th:text="${ep}"
                                            th:selected="${ep == landingConfig.heroCTALink}">
                                    </option>
                                </select>
                                <p class="text-red-600 text-sm mt-1" th:if="${#fields.hasErrors('heroCTALink')}" th:errors="*{heroCTALink}"></p>
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Hero Background Image</label>
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-blue-400 transition-colors"
                                 onclick="document.getElementById('heroImage').click()">
                                <input type="file" id="heroImage" name="heroImage" accept=".png,.jpg,.jpeg,.svg,image/svg+xml" class="hidden">
                                <p class="text-gray-600">üì∑ Click to upload hero background image</p>
                                <p class="text-sm text-gray-500 mt-1">Recommended size: 1920x1080px</p>
                            </div>
                            <div th:if="${landingConfig.heroImageUrl}" class="mt-4">
                                <p class="text-sm font-medium text-gray-700 mb-2">Current Image Preview:</p>
                                <img th:src="${landingConfig.heroImageUrl}" alt="Hero Background" class="max-w-xs rounded-lg border border-gray-300"/>
                                <p class="text-xs text-gray-500 mt-1" th:text="${landingConfig.heroImageUrl}"></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Categories Section -->
                <div class="tab-content animate-fade-in" th:classappend="${activeTab == 'categories'} ? 'block' : 'hidden'" id="categories-content">
                    <div class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Subtitle</label>
                                <input type="text" th:field="*{categorySubtitle}"
                                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"/>
                                <p class="text-red-600 text-sm mt-1" th:if="${#fields.hasErrors('categorySubtitle')}" th:errors="*{categorySubtitle}"></p>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Category Title</label>
                                <input type="text" th:field="*{categoryTitle}"
                                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"/>
                                <p class="text-red-600 text-sm mt-1" th:if="${#fields.hasErrors('categoryTitle')}" th:errors="*{categoryTitle}"></p>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Button Text</label>
                                <input type="text" th:field="*{categoryButtonText}"
                                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"/>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Tag Suggestion Logic</label>
                                <select th:field="*{tagSuggestion}"
                                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="POPULAR">Popular</option>
                                </select>
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Categories Background Image</label>
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-blue-400 transition-colors"
                                 onclick="document.getElementById('categoryImage').click()">
                                <input type="file" id="categoryImage" name="categoryImage" accept=".png,.jpg,.jpeg,.svg,image/svg+xml" class="hidden">
                                <p class="text-gray-600">üì∑ Click to upload categories background image</p>
                                <p class="text-sm text-gray-500 mt-1">Recommended size: 1920x1080px</p>
                            </div>
                            <div th:if="${landingConfig.categorySectionBgUrl}" class="mt-4">
                                <p class="text-sm font-medium text-gray-700 mb-2">Current Image Preview:</p>
                                <img th:src="${landingConfig.categorySectionBgUrl}" alt="Category Background" class="max-w-xs rounded-lg border border-gray-300"/>
                                <p class="text-xs text-gray-500 mt-1" th:text="${landingConfig.categorySectionBgUrl}"></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- About Section -->
                <div class="tab-content animate-fade-in" th:classappend="${activeTab == 'about'} ? 'block' : 'hidden'" id="about-content">
                    <div class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Subtitle</label>
                                <input type="text" th:field="*{aboutSubtitle}"
                                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"/>
                                <p class="text-red-600 text-sm mt-1" th:if="${#fields.hasErrors('aboutSubtitle')}" th:errors="*{aboutSubtitle}"></p>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Title</label>
                                <input type="text" th:field="*{aboutTitle}"
                                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"/>
                                <p class="text-red-600 text-sm mt-1" th:if="${#fields.hasErrors('aboutTitle')}" th:errors="*{aboutTitle}"></p>
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                            <textarea th:field="*{aboutDescription}" rows="4"
                                      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-vertical"></textarea>
                            <p class="text-red-600 text-sm mt-1" th:if="${#fields.hasErrors('aboutDescription')}" th:errors="*{aboutDescription}"></p>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">About Section Image</label>
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-blue-400 transition-colors"
                                 onclick="document.getElementById('aboutImage').click()">
                                <input type="file" id="aboutImage" name="aboutImage" accept=".png,.jpg,.jpeg,.svg,image/svg+xml" class="hidden">
                                <p class="text-gray-600">üì∑ Click to upload about section image</p>
                                <p class="text-sm text-gray-500 mt-1">Recommended size: 775x685px</p>
                            </div>
                            <div th:if="${landingConfig.aboutSectionImageUrl}" class="mt-4">
                                <p class="text-sm font-medium text-gray-700 mb-2">Current Image Preview:</p>
                                <img th:src="${landingConfig.aboutSectionImageUrl}" alt="About Section Image" class="max-w-xs rounded-lg border border-gray-300"/>
                                <p class="text-xs text-gray-500 mt-1" th:text="${landingConfig.aboutSectionImageUrl}"></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Courses Section -->
                <div class="tab-content animate-fade-in" th:classappend="${activeTab == 'courses'} ? 'block' : 'hidden'" id="courses-content">
                    <div class="space-y-8">
                        <!-- Course Section One -->
                        <div class="bg-gray-50 rounded-lg p-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">üìñ Course Section One</h3>
                            <div class="space-y-4">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Subtitle</label>
                                        <input type="text" th:field="*{sectionOneSubtitle}"
                                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"/>
                                        <p class="text-red-600 text-sm mt-1" th:if="${#fields.hasErrors('sectionOneSubtitle')}" th:errors="*{sectionOneSubtitle}"></p>
                                    </div>

                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Title</label>
                                        <input type="text" th:field="*{sectionOneTitle}"
                                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"/>
                                        <p class="text-red-600 text-sm mt-1" th:if="${#fields.hasErrors('sectionOneTitle')}" th:errors="*{sectionOneTitle}"></p>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Course Suggestion Logic</label>
                                    <select th:field="*{courseSectionOneSuggestion}"
                                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                        <option value="">-- Select Logic --</option>
                                        <option value="POPULAR" th:selected="${landingConfig.courseSectionOneSuggestion == 'POPULAR'}">Popular</option>
                                        <option value="RECENT" th:selected="${landingConfig.courseSectionOneSuggestion == 'RECENT'}">Recent</option>
                                        <option value="RECOMMENDED" th:selected="${landingConfig.courseSectionOneSuggestion == 'RECOMMENDED'}">Recommended</option>
                                        <option value="INTEREST_BASED" th:if="${role != 'GUEST'}" th:selected="${landingConfig.courseSectionOneSuggestion == 'INTEREST_BASED'}">Interest Based</option>
                                        <option value="HISTORY_BASED" th:if="${role == 'MENTEE_EXPERIENCED'}" th:selected="${landingConfig.courseSectionOneSuggestion == 'HISTORY_BASED'}">History Based</option>
                                        <option value="BECAUSE_YOU_LEARNED" th:if="${role == 'MENTEE_EXPERIENCED'}" th:selected="${landingConfig.courseSectionOneSuggestion == 'BECAUSE_YOU_LEARNED'}">Because You Learned</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Course Section Two -->
                        <div class="bg-gray-50 rounded-lg p-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">üìö Course Section Two</h3>
                            <div class="space-y-4">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Subtitle</label>
                                        <input type="text" th:field="*{sectionTwoSubtitle}"
                                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"/>
                                        <p class="text-red-600 text-sm mt-1" th:if="${#fields.hasErrors('sectionTwoSubtitle')}" th:errors="*{sectionTwoSubtitle}"></p>
                                    </div>

                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Title</label>
                                        <input type="text" th:field="*{sectionTwoTitle}"
                                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"/>
                                        <p class="text-red-600 text-sm mt-1" th:if="${#fields.hasErrors('sectionTwoTitle')}" th:errors="*{sectionTwoTitle}"></p>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Course Suggestion Logic</label>
                                    <select th:field="*{courseSectionTwoSuggestion}"
                                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                        <option value="">-- Select Logic --</option>
                                        <option value="POPULAR" th:selected="${landingConfig.courseSectionTwoSuggestion == 'POPULAR'}">Popular</option>
                                        <option value="RECENT" th:selected="${landingConfig.courseSectionTwoSuggestion == 'RECENT'}">Recent</option>
                                        <option value="RECOMMENDED" th:selected="${landingConfig.courseSectionTwoSuggestion == 'RECOMMENDED'}">Recommended</option>
                                        <option value="INTEREST_BASED" th:if="${role != 'GUEST'}" th:selected="${landingConfig.courseSectionTwoSuggestion == 'INTEREST_BASED'}">Interest Based</option>
                                        <option value="HISTORY_BASED" th:if="${role == 'MENTEE_EXPERIENCED'}" th:selected="${landingConfig.courseSectionTwoSuggestion == 'HISTORY_BASED'}">History Based</option>
                                        <option value="BECAUSE_YOU_LEARNED" th:if="${role == 'MENTEE_EXPERIENCED'}" th:selected="${landingConfig.courseSectionTwoSuggestion == 'BECAUSE_YOU_LEARNED'}">Because You Learned</option>
                                    </select>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Course Section Background Image</label>
                                    <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-blue-400 transition-colors"
                                         onclick="document.getElementById('courseImage').click()">
                                        <input type="file" id="courseImage" name="courseImage" accept=".png,.jpg,.jpeg,.svg,image/svg+xml" class="hidden">
                                        <p class="text-gray-600">üì∑ Click to upload course section background image</p>
                                        <p class="text-sm text-gray-500 mt-1">Recommended size: 1920x1080px</p>
                                    </div>
                                    <div th:if="${landingConfig.courseSectionBgUrl}" class="mt-4">
                                        <p class="text-sm font-medium text-gray-700 mb-2">Current Image Preview:</p>
                                        <img th:src="${landingConfig.courseSectionBgUrl}" alt="Course Background" class="max-w-xs rounded-lg border border-gray-300"/>
                                        <p class="text-xs text-gray-500 mt-1" th:text="${landingConfig.courseSectionBgUrl}"></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mentor Section -->
                <div class="tab-content animate-fade-in" th:classappend="${activeTab == 'mentor'} ? 'block' : 'hidden'" id="mentor-content">
                    <div class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Mentor Section Title</label>
                                <input type="text" th:field="*{mentorSectionTitle}"
                                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"/>
                                <p class="text-red-600 text-sm mt-1" th:if="${#fields.hasErrors('mentorSectionTitle')}" th:errors="*{mentorSectionTitle}"></p>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Mentor Section Subtitle</label>
                                <input type="text" th:field="*{mentorSectionSubtitle}"
                                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"/>
                                <p class="text-red-600 text-sm mt-1" th:if="${#fields.hasErrors('mentorSectionSubtitle')}" th:errors="*{mentorSectionSubtitle}"></p>
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Mentor Suggestion Logic</label>
                            <select th:field="*{mentorSuggestion}"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="POPULAR">Popular</option>
                                <option value="TOP_RATED">Top Rated</option>
                                <option value="INTEREST_BASED" th:if="${role != 'GUEST'}">Interest Based</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Mentor Section Background Image</label>
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-blue-400 transition-colors"
                                 onclick="document.getElementById('mentorImage').click()">
                                <input type="file" id="mentorImage" name="mentorImage" accept=".png,.jpg,.jpeg,.svg,image/svg+xml" class="hidden">
                                <p class="text-gray-600">üì∑ Click to upload mentor section background image</p>
                                <p class="text-sm text-gray-500 mt-1">Recommended size: 1920x1080px</p>
                            </div>
                            <div th:if="${landingConfig.mentorSectionBgUrl}" class="mt-4">
                                <p class="text-sm font-medium text-gray-700 mb-2">Current Image Preview:</p>
                                <img th:src="${landingConfig.mentorSectionBgUrl}" alt="Mentor Background" class="max-w-xs rounded-lg border border-gray-300"/>
                                <p class="text-xs text-gray-500 mt-1" th:text="${landingConfig.mentorSectionBgUrl}"></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Footer Section -->
                <div class="tab-content animate-fade-in" th:classappend="${activeTab == 'footer'} ? 'block' : 'hidden'" id="footer-content">
                    <div class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                            <textarea th:field="*{footerDescription}" rows="4"
                                      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-vertical"></textarea>
                            <p class="text-red-600 text-sm mt-1" th:if="${#fields.hasErrors('footerDescription')}" th:errors="*{footerDescription}"></p>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Copyright</label>
                            <input type="text" th:field="*{copyrightText}"
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"/>
                            <p class="text-red-600 text-sm mt-1" th:if="${#fields.hasErrors('copyrightText')}" th:errors="*{copyrightText}"></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex gap-4 p-6">
                <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200">
                    üìÄ Save Changes
                </button>
                <form th:action="@{/manager/landing-page/reset}" method="get" class="inline-block">
                    <input type="hidden" name="role" th:value="${role}"/>
                    <button type="submit" class="px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors duration-200"
                            onclick="return confirm('Reset to default for this role?')">
                        üîÑ Reset to Defaults
                    </button>
                </form>
                <form th:action="@{/manager/landing-page/preview}" method="post" target="_blank" th:object="${landingConfig}" class="inline-block">
                    <input type="hidden" name="role" th:value="${role}"/>
                    <input type="hidden" th:field="*{heroHeadline}"/>
                    <input type="hidden" th:field="*{heroSubHeadline}"/>
                    <input type="hidden" th:field="*{heroCTA}"/>
                    <input type="hidden" th:field="*{heroCTALink}"/>
                    <input type="hidden" th:field="*{heroImageUrl}"/>
                    <input type="hidden" th:field="*{categorySubtitle}"/>
                    <input type="hidden" th:field="*{categoryTitle}"/>
                    <input type="hidden" th:field="*{categoryButtonText}"/>
                    <input type="hidden" th:field="*{categorySectionBgUrl}"/>
                    <input type="hidden" th:field="*{tagSuggestion}"/>
                    <input type="hidden" th:field="*{aboutSubtitle}"/>
                    <input type="hidden" th:field="*{aboutTitle}"/>
                    <input type="hidden" th:field="*{aboutDescription}"/>
                    <input type="hidden" th:field="*{aboutSectionImageUrl}"/>
                    <input type="hidden" th:field="*{sectionOneSubtitle}"/>
                    <input type="hidden" th:field="*{sectionOneTitle}"/>
                    <input type="hidden" th:field="*{sectionTwoSubtitle}"/>
                    <input type="hidden" th:field="*{sectionTwoTitle}"/>
                    <input type="hidden" th:field="*{courseSectionOneSuggestion}"/>
                    <input type="hidden" th:field="*{courseSectionTwoSuggestion}"/>
                    <input type="hidden" th:field="*{courseSectionBgUrl}"/>
                    <input type="hidden" th:field="*{mentorSectionTitle}"/>
                    <input type="hidden" th:field="*{mentorSectionSubtitle}"/>
                    <input type="hidden" th:field="*{mentorSuggestion}"/>
                    <input type="hidden" th:field="*{mentorSectionBgUrl}"/>
                    <input type="hidden" th:field="*{footerDescription}"/>
                    <input type="hidden" th:field="*{copyrightText}"/>
                    <button type="submit" class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200">
                        üëÅÔ∏è Preview Changes
                    </button>
                </form>
            </div>
        </div>
    </form>
</div>

<script>
    function toggleMobileMenu() {
        const sidebar = document.querySelector('.sidebar');
        const overlay = document.getElementById('mobileOverlay');
        sidebar.classList.toggle('open');
        overlay.classList.toggle('active');
    }

    function switchTab(tabName) {
        document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
        document.querySelectorAll('.tab').forEach(el => el.classList.remove('text-blue-600', 'border-blue-500', 'bg-blue-50'));
        const targetContent = document.getElementById(tabName + '-content');
        if (targetContent) {
            targetContent.classList.remove('hidden');
        }
        const targetTab = document.querySelector(`button[onclick="switchTab('${tabName}')"]`);
        if (targetTab) {
            targetTab.classList.add('text-blue-600', 'border-blue-500', 'bg-blue-50');
        }

        document.querySelectorAll('input[name="activeTab"]').forEach(input => {
            input.value = tabName;
        });

        const url = new URL(window.location);
        url.searchParams.set('activeTab', tabName);
        window.history.replaceState({}, '', url);
    }

    document.addEventListener("DOMContentLoaded", function () {
        const scheduleCheckbox = document.getElementById("useScheduleReminder");
        if (scheduleCheckbox) {
            scheduleCheckbox.addEventListener("change", function () {
                if (this.checked) {
                    const headlineInput = document.querySelector("input[name='heroHeadline']");
                    const subHeadlineInput = document.querySelector("input[name='heroSubHeadline']");
                    const ctaInput = document.querySelector("input[name='heroCTA']");
                    const ctaLinkInput = document.querySelector("select[name='heroCTALink']");

                    if (headlineInput) headlineInput.value = "Upcoming Sessions";
                    if (subHeadlineInput) subHeadlineInput.value = "Next session: [auto-filled by system]";
                    if (ctaInput) ctaInput.value = "View schedule ‚Üí";
                    if (ctaLinkInput) ctaLinkInput.value = "/schedules";

                    isDirty = true;
                }
            });
        }

        let isDirty = false;
        const form = document.querySelector("form[action*='/save']");
        if (form) {
            form.querySelectorAll("input, textarea, select").forEach(el => {
                el.addEventListener("change", () => isDirty = true);
                el.addEventListener("input", () => isDirty = true);
            });

            form.addEventListener("submit", function(e) {
                const activeTabFromUrl = new URLSearchParams(window.location.search).get('activeTab') || 'hero';
                const activeTabInput = form.querySelector('input[name="activeTab"]');
                if (activeTabInput) {
                    activeTabInput.value = activeTabFromUrl;
                }
            });
        }

        const roleSelect = document.querySelector("select[name='role']");
        if (roleSelect) {
            let originalValue = roleSelect.value;

            roleSelect.addEventListener("change", function (e) {
                if (isDirty) {
                    const confirmLeave = confirm("‚ö†Ô∏è You have unsaved changes. Are you sure you want to switch roles?");
                    if (!confirmLeave) {
                        e.preventDefault();
                        e.stopPropagation();
                        this.value = originalValue;
                        return false;
                    }
                }
                originalValue = this.value;
            });
        }

        document.querySelectorAll('.alert').forEach(alert => {
            setTimeout(() => {
                alert.style.transition = 'opacity 0.5s ease-out';
                alert.style.opacity = '0';
                setTimeout(() => {
                    alert.remove();
                }, 500);
            }, 5000);
        });

        const urlParams = new URLSearchParams(window.location.search);
        const activeTabFromUrl = urlParams.get('activeTab') || 'hero';
        switchTab(activeTabFromUrl);
    });
</script>
</body>
</html>